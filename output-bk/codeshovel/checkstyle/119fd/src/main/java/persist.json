{
  "origin": "codeshovel",
  "repositoryName": "checkstyle",
  "repositoryPath": "/home/ncbradley/codeshovel-repos/checkstyle/.git",
  "startCommitName": "119fd4fb33bef9f5c66fc950396669af842c21a3",
  "sourceFileName": "java",
  "functionId": "persist",
  "sourceFilePath": "src/main/java",
  "functionStartLine": 0,
  "functionEndLine": 156,
  "changeHistory": [
    "d8e7cbd12f49569dd277630ae8a704ad99a45309",
    "f6bec165c9c6b6d8cc430cb0694dd42ccb0b7f69",
    "bc034f53c0b807bc1a4234a3c0313d3761ed5b62",
    "ea9ff3965d9c657b5b7bd2d969e075f430635c47",
    "4c078ba710068498ca513ce115993e30dab4562a",
    "ee518dfe86b29d1fa4d76f0dc0c11fb83afafda1",
    "547fb51b1db4533e6e1a03aa528a2fed5de828e9",
    "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1",
    "f1efb27670a93690577f1bae17fc9dcbd88a795d",
    "d2af4accdde3eac0a2103353f490e97bf62f61d2",
    "35d1673788bbbac8263fdb69275dc6a63b095a24",
    "864c681eef6521082729167ffdaabd2af1e813ed",
    "960d7d03b0dd7d1070ff218d5b27d21db7b0f0da",
    "15c7162ea43a4e7517227a281f6f34d4a2ecb5a5",
    "6c304950f62f06cb3c72e46869c3fa3fbdc1e7d7"
  ],
  "changeHistoryShort": {
    "d8e7cbd12f49569dd277630ae8a704ad99a45309": "Ybodychange",
    "f6bec165c9c6b6d8cc430cb0694dd42ccb0b7f69": "Ymodifierchange",
    "bc034f53c0b807bc1a4234a3c0313d3761ed5b62": "Ybodychange",
    "ea9ff3965d9c657b5b7bd2d969e075f430635c47": "Ymultichange(Yrename,Yexceptionschange,Ybodychange)",
    "4c078ba710068498ca513ce115993e30dab4562a": "Ybodychange",
    "ee518dfe86b29d1fa4d76f0dc0c11fb83afafda1": "Ybodychange",
    "547fb51b1db4533e6e1a03aa528a2fed5de828e9": "Ybodychange",
    "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1": "Ybodychange",
    "f1efb27670a93690577f1bae17fc9dcbd88a795d": "Yfilerename",
    "d2af4accdde3eac0a2103353f490e97bf62f61d2": "Ybodychange",
    "35d1673788bbbac8263fdb69275dc6a63b095a24": "Ybodychange",
    "864c681eef6521082729167ffdaabd2af1e813ed": "Ybodychange",
    "960d7d03b0dd7d1070ff218d5b27d21db7b0f0da": "Ybodychange",
    "15c7162ea43a4e7517227a281f6f34d4a2ecb5a5": "Ybodychange",
    "6c304950f62f06cb3c72e46869c3fa3fbdc1e7d7": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d8e7cbd12f49569dd277630ae8a704ad99a45309": {
      "type": "Ybodychange",
      "commitMessage": "Pull #3259: Avoid catching of InvalidPathException and AccessDeniedException in PropertyCacheFile#persist (#3259)\n\n",
      "commitDate": 1466185612000,
      "commitName": "d8e7cbd12f49569dd277630ae8a704ad99a45309",
      "commitAuthor": "Andrei Selkin",
      "commitDateOld": 1463431992000,
      "commitNameOld": "ecbeaa6e1df7cb021745e111b04395b9fbd509c7",
      "commitAuthorOld": "Andrei Selkin",
      "daysBetweenCommits": 31.87,
      "commitsBetweenForRepo": 91,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,14 @@\n     public void persist() throws IOException {\n-        try {\n-            final Path directory \u003d Paths.get(fileName).getParent();\n-            if (directory !\u003d null) {\n-                Files.createDirectories(directory);\n-            }\n-        }\n-        catch (InvalidPathException | AccessDeniedException ex) {\n-            throw new IllegalStateException(ex.getMessage(), ex);\n+        final Path directory \u003d Paths.get(fileName).getParent();\n+        if (directory !\u003d null) {\n+            Files.createDirectories(directory);\n         }\n         FileOutputStream out \u003d null;\n         try {\n             out \u003d new FileOutputStream(fileName);\n             details.store(out, null);\n         }\n         finally {\n             flushAndCloseOutStream(out);\n         }\n     }\n\\ No newline at end of file\n"
    },
    "f6bec165c9c6b6d8cc430cb0694dd42ccb0b7f69": {
      "type": "Ymodifierchange",
      "commitMessage": "Issue #957: Resolve problems from PMD DefaultPackage rule\n",
      "commitDate": 1455889109000,
      "commitName": "f6bec165c9c6b6d8cc430cb0694dd42ccb0b7f69",
      "commitAuthor": "Vladislav Lisetskiy",
      "commitDateOld": 1455040202000,
      "commitNameOld": "d46c2cf0e9df06bb5f424dbd7645574f082f7609",
      "commitAuthorOld": "Andrei Selkin",
      "daysBetweenCommits": 9.83,
      "commitsBetweenForRepo": 41,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n-    void persist() throws IOException {\n+    public void persist() throws IOException {\n         try {\n             final Path directory \u003d Paths.get(fileName).getParent();\n             if (directory !\u003d null) {\n                 Files.createDirectories(directory);\n             }\n         }\n         catch (InvalidPathException | AccessDeniedException ex) {\n             throw new IllegalStateException(ex.getMessage(), ex);\n         }\n         FileOutputStream out \u003d null;\n         try {\n             out \u003d new FileOutputStream(fileName);\n             details.store(out, null);\n         }\n         finally {\n             flushAndCloseOutStream(out);\n         }\n     }\n\\ No newline at end of file\n"
    },
    "bc034f53c0b807bc1a4234a3c0313d3761ed5b62": {
      "type": "Ybodychange",
      "commitMessage": "Issue #2575: Create directory structure needed to store cache file\n",
      "commitDate": 1450186172000,
      "commitName": "bc034f53c0b807bc1a4234a3c0313d3761ed5b62",
      "commitAuthor": "Andrei Selkin",
      "commitDateOld": 1445173437000,
      "commitNameOld": "1487e5161886d95cb8c82e4fb1a8b447fa7e32d0",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 58.02,
      "commitsBetweenForRepo": 274,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,19 @@\n     void persist() throws IOException {\n+        try {\n+            final Path directory \u003d Paths.get(fileName).getParent();\n+            if (directory !\u003d null) {\n+                Files.createDirectories(directory);\n+            }\n+        }\n+        catch (InvalidPathException | AccessDeniedException ex) {\n+            throw new IllegalStateException(ex.getMessage(), ex);\n+        }\n         FileOutputStream out \u003d null;\n         try {\n             out \u003d new FileOutputStream(fileName);\n             details.store(out, null);\n         }\n         finally {\n             flushAndCloseOutStream(out);\n         }\n     }\n\\ No newline at end of file\n"
    },
    "ea9ff3965d9c657b5b7bd2d969e075f430635c47": {
      "type": "Ymultichange(Yrename,Yexceptionschange,Ybodychange)",
      "commitMessage": "100% UTs coverage for PropertyCacheFile. Refactoring of PropertyCacheFile. #1294\n",
      "commitDate": 1438103538000,
      "commitName": "ea9ff3965d9c657b5b7bd2d969e075f430635c47",
      "commitAuthor": "Roman Ivanov",
      "subchanges": [
        "Yrename",
        "Yexceptionschange",
        "Ybodychange"
      ]
    },
    "4c078ba710068498ca513ce115993e30dab4562a": {
      "type": "Ybodychange",
      "commitMessage": "Make \"private\" methods \"static\" where possible. #46\n\nSonarQube rule: [\"private\" methods that don\u0027t access instance data should be \"static\"](http://nemo.sonarqube.org/coding_rules#rule_key\u003dsquid%3AS2325).\n\nRationale: private methods that don\u0027t access instance data can be static to prevent any misunderstanding about the contract of the method.\n",
      "commitDate": 1437195084000,
      "commitName": "4c078ba710068498ca513ce115993e30dab4562a",
      "commitAuthor": "Michal Kordas",
      "commitDateOld": 1435511623000,
      "commitNameOld": "4ea1896f464b0f6c0ddfca3d8d9c9f84703bae5e",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 19.48,
      "commitsBetweenForRepo": 168,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n     void destroy() {\n         if (detailsFile !\u003d null) {\n             FileOutputStream out \u003d null;\n             try {\n                 out \u003d new FileOutputStream(detailsFile);\n                 details.store(out, null);\n             }\n             catch (final IOException e) {\n                 LOG.debug(\"Unable to save cache file.\", e);\n             }\n             finally {\n                 if (out !\u003d null) {\n-                    this.flushAndCloseOutStream(out);\n+                    flushAndCloseOutStream(out);\n                 }\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "ee518dfe86b29d1fa4d76f0dc0c11fb83afafda1": {
      "type": "Ybodychange",
      "commitMessage": "Fix PMD violations from \u0027logging-jakarta\u0027 ruleset, issue #871\n",
      "commitDate": 1428961380000,
      "commitName": "ee518dfe86b29d1fa4d76f0dc0c11fb83afafda1",
      "commitAuthor": "Michal Kordas",
      "commitDateOld": 1428448515000,
      "commitNameOld": "547fb51b1db4533e6e1a03aa528a2fed5de828e9",
      "commitAuthorOld": "Roman Ivanov",
      "daysBetweenCommits": 5.94,
      "commitsBetweenForRepo": 25,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,18 @@\n     void destroy()\n     {\n         if (detailsFile !\u003d null) {\n             FileOutputStream out \u003d null;\n             try {\n                 out \u003d new FileOutputStream(detailsFile);\n                 details.store(out, null);\n             }\n             catch (final IOException e) {\n-                Utils.getExceptionLogger()\n-                    .debug(\"Unable to save cache file.\", e);\n+                LOG.debug(\"Unable to save cache file.\", e);\n             }\n             finally {\n                 if (out !\u003d null) {\n                     this.flushAndCloseOutStream(out);\n                 }\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "547fb51b1db4533e6e1a03aa528a2fed5de828e9": {
      "type": "Ybodychange",
      "commitMessage": "fix for NP_GUARANTEED_DEREF_ON_EXCEPTION_PATH. Issue #778\n",
      "commitDate": 1428448515000,
      "commitName": "547fb51b1db4533e6e1a03aa528a2fed5de828e9",
      "commitAuthor": "Roman Ivanov",
      "commitDateOld": 1427398517000,
      "commitNameOld": "06865630aa3da0b36064b9e00e0e95ff681f234e",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 12.15,
      "commitsBetweenForRepo": 36,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,19 @@\n     void destroy()\n     {\n         if (detailsFile !\u003d null) {\n             FileOutputStream out \u003d null;\n             try {\n                 out \u003d new FileOutputStream(detailsFile);\n                 details.store(out, null);\n             }\n             catch (final IOException e) {\n                 Utils.getExceptionLogger()\n                     .debug(\"Unable to save cache file.\", e);\n             }\n             finally {\n-                this.flushAndCloseOutStream(out);\n+                if (out !\u003d null) {\n+                    this.flushAndCloseOutStream(out);\n+                }\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1": {
      "type": "Ybodychange",
      "commitMessage": "Prefixes, checkstyle, #512\n\nConflicts:\n\tsrc/main/java/com/puppycrawl/tools/checkstyle/TreeWalker.java\n",
      "commitDate": 1421678312000,
      "commitName": "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1",
      "commitAuthor": "alexkravin",
      "commitDateOld": 1415898865000,
      "commitNameOld": "485e05db239279af4caeaf76b406b058144ea438",
      "commitAuthorOld": "Roman Ivanov",
      "daysBetweenCommits": 66.89,
      "commitsBetweenForRepo": 231,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n     void destroy()\n     {\n-        if (mDetailsFile !\u003d null) {\n+        if (detailsFile !\u003d null) {\n             FileOutputStream out \u003d null;\n             try {\n-                out \u003d new FileOutputStream(mDetailsFile);\n-                mDetails.store(out, null);\n+                out \u003d new FileOutputStream(detailsFile);\n+                details.store(out, null);\n             }\n             catch (final IOException e) {\n                 Utils.getExceptionLogger()\n                     .debug(\"Unable to save cache file.\", e);\n             }\n             finally {\n                 this.flushAndCloseOutStream(out);\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "f1efb27670a93690577f1bae17fc9dcbd88a795d": {
      "type": "Yfilerename",
      "commitMessage": "moving to standard directory layout\n",
      "commitDate": 1393953491000,
      "commitName": "f1efb27670a93690577f1bae17fc9dcbd88a795d",
      "commitAuthor": "Ivan Sopov",
      "commitDateOld": 1393482905000,
      "commitNameOld": "1cdaeaaa4fbf02a7388f1fcbea1c86ef0ea32fed",
      "commitAuthorOld": "Andrew Gaul",
      "daysBetweenCommits": 5.45,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": ""
    },
    "d2af4accdde3eac0a2103353f490e97bf62f61d2": {
      "type": "Ybodychange",
      "commitMessage": "Apply parts of patch #1952556 fixing some FindBugs bugs. Thanks to Travis Schneeberger\n",
      "commitDate": 1214968564000,
      "commitName": "d2af4accdde3eac0a2103353f490e97bf62f61d2",
      "commitAuthor": "Oliver Burn",
      "commitDateOld": 1200192438000,
      "commitNameOld": "5a7e221b757e91d49be1aea105eb4b839e653fbd",
      "commitAuthorOld": "Oliver Burn",
      "daysBetweenCommits": 171.02,
      "commitsBetweenForRepo": 60,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,26 +1,17 @@\n     void destroy()\n     {\n         if (mDetailsFile !\u003d null) {\n             FileOutputStream out \u003d null;\n             try {\n                 out \u003d new FileOutputStream(mDetailsFile);\n                 mDetails.store(out, null);\n             }\n             catch (final IOException e) {\n                 Utils.getExceptionLogger()\n                     .debug(\"Unable to save cache file.\", e);\n             }\n             finally {\n-                if (out !\u003d null) {\n-                    try {\n-                        out.flush();\n-                        out.close();\n-                    }\n-                    catch (final IOException ex) {\n-                        Utils.getExceptionLogger()\n-                            .debug(\"Unable to close cache file.\", ex);\n-                    }\n-                }\n+                this.flushAndCloseOutStream(out);\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "35d1673788bbbac8263fdb69275dc6a63b095a24": {
      "type": "Ybodychange",
      "commitMessage": "Making local variables final where possible.\n",
      "commitDate": 1152243856000,
      "commitName": "35d1673788bbbac8263fdb69275dc6a63b095a24",
      "commitAuthor": "Oliver Burn",
      "commitDateOld": 1152243235000,
      "commitNameOld": "f4a92dad02a3a36b5e2e988bba04debb1e2c9db9",
      "commitAuthorOld": "Oliver Burn",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,26 +1,26 @@\n     void destroy()\n     {\n         if (mDetailsFile !\u003d null) {\n             FileOutputStream out \u003d null;\n             try {\n                 out \u003d new FileOutputStream(mDetailsFile);\n                 mDetails.store(out, null);\n             }\n-            catch (IOException e) {\n+            catch (final IOException e) {\n                 Utils.getExceptionLogger()\n                     .debug(\"Unable to save cache file.\", e);\n             }\n             finally {\n                 if (out !\u003d null) {\n                     try {\n                         out.flush();\n                         out.close();\n                     }\n-                    catch (IOException ex) {\n+                    catch (final IOException ex) {\n                         Utils.getExceptionLogger()\n                             .debug(\"Unable to close cache file.\", ex);\n                     }\n                 }\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "864c681eef6521082729167ffdaabd2af1e813ed": {
      "type": "Ybodychange",
      "commitMessage": "Applied fix for cache file from patch 1012389\n",
      "commitDate": 1121704545000,
      "commitName": "864c681eef6521082729167ffdaabd2af1e813ed",
      "commitAuthor": "Oleg Sukhodolsky",
      "commitDateOld": 1105267857000,
      "commitNameOld": "0d887cde58e54d920644ee543dab346b93e8aae9",
      "commitAuthorOld": "Lars Kühne",
      "daysBetweenCommits": 190.24,
      "commitsBetweenForRepo": 169,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,26 +1,26 @@\n     void destroy()\n     {\n         if (mDetailsFile !\u003d null) {\n             FileOutputStream out \u003d null;\n             try {\n                 out \u003d new FileOutputStream(mDetailsFile);\n                 mDetails.store(out, null);\n             }\n             catch (IOException e) {\n-                System.out.println(\"Unable to save cache file\");\n-                e.printStackTrace(System.out);\n+                Utils.getExceptionLogger()\n+                    .debug(\"Unable to save cache file.\", e);\n             }\n             finally {\n                 if (out !\u003d null) {\n                     try {\n                         out.flush();\n                         out.close();\n                     }\n                     catch (IOException ex) {\n-                        System.out.println(\"Unable to close cache file\");\n-                        ex.printStackTrace(System.out);\n+                        Utils.getExceptionLogger()\n+                            .debug(\"Unable to close cache file.\", ex);\n                     }\n                 }\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "960d7d03b0dd7d1070ff218d5b27d21db7b0f0da": {
      "type": "Ybodychange",
      "commitMessage": "close cachefile streams, fixes bug #665016\n",
      "commitDate": 1042270788000,
      "commitName": "960d7d03b0dd7d1070ff218d5b27d21db7b0f0da",
      "commitAuthor": "Lars Kühne",
      "commitDateOld": 1039173826000,
      "commitNameOld": "419d9243861ac99e80a7783547a51adf8b284817",
      "commitAuthorOld": "Rick Giles",
      "daysBetweenCommits": 35.84,
      "commitsBetweenForRepo": 220,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,26 @@\n     void destroy()\n     {\n         if (mDetailsFile !\u003d null) {\n+            FileOutputStream out \u003d null;\n             try {\n-                mDetails.store(new FileOutputStream(mDetailsFile), null);\n+                out \u003d new FileOutputStream(mDetailsFile);\n+                mDetails.store(out, null);\n             }\n             catch (IOException e) {\n                 System.out.println(\"Unable to save cache file\");\n                 e.printStackTrace(System.out);\n             }\n+            finally {\n+                if (out !\u003d null) {\n+                    try {\n+                        out.flush();\n+                        out.close();\n+                    }\n+                    catch (IOException ex) {\n+                        System.out.println(\"Unable to close cache file\");\n+                        ex.printStackTrace(System.out);\n+                    }\n+                }\n+            }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "15c7162ea43a4e7517227a281f6f34d4a2ecb5a5": {
      "type": "Ybodychange",
      "commitMessage": "Refactored Checker to not take a PrintStream. All errors are not logged to\nstandard output.\n",
      "commitDate": 1011788929000,
      "commitName": "15c7162ea43a4e7517227a281f6f34d4a2ecb5a5",
      "commitAuthor": "Oliver Burn",
      "commitDateOld": 998018294000,
      "commitNameOld": "c4d036af767e343bb730f67f87fb74b2e3355356",
      "commitAuthorOld": "Oliver Burn",
      "daysBetweenCommits": 159.38,
      "commitsBetweenForRepo": 93,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,12 @@\n     void destroy()\n     {\n         if (mDetailsFile !\u003d null) {\n             try {\n                 mDetails.store(new FileOutputStream(mDetailsFile), null);\n             }\n             catch (IOException e) {\n-                mLog.println(\"Unable to save cache file\");\n-                e.printStackTrace(mLog);\n+                System.out.println(\"Unable to save cache file\");\n+                e.printStackTrace(System.out);\n             }\n         }\n     }\n\\ No newline at end of file\n"
    },
    "6c304950f62f06cb3c72e46869c3fa3fbdc1e7d7": {
      "type": "Yintroduced",
      "commitMessage": "added support for caching\n",
      "commitDate": 997020777000,
      "commitName": "6c304950f62f06cb3c72e46869c3fa3fbdc1e7d7",
      "commitAuthor": "Oliver Burn"
    }
  }
}