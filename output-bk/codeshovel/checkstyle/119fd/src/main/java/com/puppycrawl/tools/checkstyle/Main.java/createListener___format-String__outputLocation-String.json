{
  "origin": "codeshovel",
  "repositoryName": "checkstyle",
  "repositoryPath": "/home/ncbradley/codeshovel-repos/checkstyle/.git",
  "startCommitName": "119fd4fb33bef9f5c66fc950396669af842c21a3",
  "sourceFileName": "Main.java",
  "functionName": "createListener",
  "functionId": "createListener___format-String__outputLocation-String",
  "sourceFilePath": "src/main/java/com/puppycrawl/tools/checkstyle/Main.java",
  "functionStartLine": 588,
  "functionEndLine": 624,
  "changeHistory": [
    "dc88a9954baf88df6543cf73baabed710f882363",
    "dab682c2f0e2853858a6d24e1fe2c2088315a0cc",
    "0d8e93ce79ea33b72b3e904d8796984271ee3d8d",
    "70a6e2e6d34fa5a404e88e45cd62a20a06e19556",
    "423ed9e469db620671459827b58c89025d8f6c66",
    "b6d9344d1c152f225a22ce9ce09341b3cc9488af",
    "a29f01a95b9dee1e64ec7ed91b4d0876eb82c0bf",
    "cdf3e56bacd3895262af8a1df9ca5c81f4071970",
    "8c3e4a50749044ae3177fc4c84db9c4fd93abca2",
    "259cc41625b88390ce26737a819aa446cfc72541",
    "8a3f5bf6d5389b9e175c9c769992faece6d76ada",
    "aaf39002ac7fa00b95f4719beca058f6f7445574",
    "1a2c318e22a0b2b22ccc76019217c0892fe2d59b",
    "ab2f93f9bf61816d84154e636d32c81c05854e24",
    "702a1a957607881e72bb94b3104c2603ef10891f",
    "e36ae750f6378b9a3cd8e5171c6e6b710bf10959",
    "ca3ffb73abc810385a4ce8fe685ad31c9d172bff",
    "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1",
    "f1efb27670a93690577f1bae17fc9dcbd88a795d",
    "784842200f5307597d721ba0190c912cfab1b77f"
  ],
  "changeHistoryShort": {
    "dc88a9954baf88df6543cf73baabed710f882363": "Ybodychange",
    "dab682c2f0e2853858a6d24e1fe2c2088315a0cc": "Ybodychange",
    "0d8e93ce79ea33b72b3e904d8796984271ee3d8d": "Ybodychange",
    "70a6e2e6d34fa5a404e88e45cd62a20a06e19556": "Ybodychange",
    "423ed9e469db620671459827b58c89025d8f6c66": "Ybodychange",
    "b6d9344d1c152f225a22ce9ce09341b3cc9488af": "Yexceptionschange",
    "a29f01a95b9dee1e64ec7ed91b4d0876eb82c0bf": "Ybodychange",
    "cdf3e56bacd3895262af8a1df9ca5c81f4071970": "Ybodychange",
    "8c3e4a50749044ae3177fc4c84db9c4fd93abca2": "Ybodychange",
    "259cc41625b88390ce26737a819aa446cfc72541": "Ybodychange",
    "8a3f5bf6d5389b9e175c9c769992faece6d76ada": "Ybodychange",
    "aaf39002ac7fa00b95f4719beca058f6f7445574": "Ybodychange",
    "1a2c318e22a0b2b22ccc76019217c0892fe2d59b": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
    "ab2f93f9bf61816d84154e636d32c81c05854e24": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
    "702a1a957607881e72bb94b3104c2603ef10891f": "Yexceptionschange",
    "e36ae750f6378b9a3cd8e5171c6e6b710bf10959": "Ybodychange",
    "ca3ffb73abc810385a4ce8fe685ad31c9d172bff": "Ybodychange",
    "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1": "Ymultichange(Yparameterchange,Ybodychange)",
    "f1efb27670a93690577f1bae17fc9dcbd88a795d": "Yfilerename",
    "784842200f5307597d721ba0190c912cfab1b77f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "dc88a9954baf88df6543cf73baabed710f882363": {
      "type": "Ybodychange",
      "commitMessage": "Issue #4709: fix avoid boolean parameters for public methods\n",
      "commitDate": 1502279688000,
      "commitName": "dc88a9954baf88df6543cf73baabed710f882363",
      "commitAuthor": "vasilyeva",
      "commitDateOld": 1501378825000,
      "commitNameOld": "dd91dc1cf4dfbffd1bd608a9b0f8a487eb25122d",
      "commitAuthorOld": "vasilyeva",
      "daysBetweenCommits": 10.43,
      "commitsBetweenForRepo": 38,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,39 +1,40 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws FileNotFoundException {\n \n         // setup the output stream\n         final OutputStream out;\n-        final boolean closeOutputStream;\n+        final AutomaticBean.OutputStreamOptions closeOutputStream;\n         if (outputLocation \u003d\u003d null) {\n             out \u003d System.out;\n-            closeOutputStream \u003d false;\n+            closeOutputStream \u003d AutomaticBean.OutputStreamOptions.NONE;\n         }\n         else {\n             out \u003d new FileOutputStream(outputLocation);\n-            closeOutputStream \u003d true;\n+            closeOutputStream \u003d AutomaticBean.OutputStreamOptions.CLOSE;\n         }\n \n         // setup a listener\n         final AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n-            listener \u003d new DefaultLogger(out, closeOutputStream, out, false);\n+            listener \u003d new DefaultLogger(out, closeOutputStream, out,\n+                    AutomaticBean.OutputStreamOptions.NONE);\n \n         }\n         else {\n-            if (closeOutputStream) {\n+            if (closeOutputStream \u003d\u003d AutomaticBean.OutputStreamOptions.CLOSE) {\n                 CommonUtils.close(out);\n             }\n             final LocalizedMessage outputFormatExceptionMessage \u003d new LocalizedMessage(0,\n                     Definitions.CHECKSTYLE_BUNDLE, CREATE_LISTENER_EXCEPTION,\n                     new String[] {format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME}, null,\n                     Main.class, null);\n             throw new IllegalStateException(outputFormatExceptionMessage.getMessage());\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "dab682c2f0e2853858a6d24e1fe2c2088315a0cc": {
      "type": "Ybodychange",
      "commitMessage": "Issue #3110: Modified Main to remove hardcoded messages and to support i18n for the messages\n",
      "commitDate": 1499482554000,
      "commitName": "dab682c2f0e2853858a6d24e1fe2c2088315a0cc",
      "commitAuthor": "Subbu Dantu",
      "commitDateOld": 1499049797000,
      "commitNameOld": "036582d728d2e2bb37f360bb3a74f899f04d587d",
      "commitAuthorOld": "Andrew Kuchev",
      "daysBetweenCommits": 5.01,
      "commitsBetweenForRepo": 45,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,39 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws FileNotFoundException {\n \n         // setup the output stream\n         final OutputStream out;\n         final boolean closeOutputStream;\n         if (outputLocation \u003d\u003d null) {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n         else {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOutputStream \u003d true;\n         }\n \n         // setup a listener\n         final AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOutputStream, out, false);\n \n         }\n         else {\n             if (closeOutputStream) {\n                 CommonUtils.close(out);\n             }\n-            throw new IllegalStateException(String.format(\n-                    \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n-                    format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n+            final LocalizedMessage outputFormatExceptionMessage \u003d new LocalizedMessage(0,\n+                    Definitions.CHECKSTYLE_BUNDLE, CREATE_LISTENER_EXCEPTION,\n+                    new String[] {format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME}, null,\n+                    Main.class, null);\n+            throw new IllegalStateException(outputFormatExceptionMessage.getMessage());\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "0d8e93ce79ea33b72b3e904d8796984271ee3d8d": {
      "type": "Ybodychange",
      "commitMessage": "minor: enforce FinalLocalVariableCheck on checkstyle code\n",
      "commitDate": 1453646135000,
      "commitName": "0d8e93ce79ea33b72b3e904d8796984271ee3d8d",
      "commitAuthor": "Bhavik Patel",
      "commitDateOld": 1451953543000,
      "commitNameOld": "617ebf2bf27d284dcc7b866f85439fcf6dab3402",
      "commitAuthorOld": "Roman Ivanov",
      "daysBetweenCommits": 19.59,
      "commitsBetweenForRepo": 25,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,37 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws FileNotFoundException {\n \n         // setup the output stream\n-        OutputStream out;\n-        boolean closeOutputStream;\n+        final OutputStream out;\n+        final boolean closeOutputStream;\n         if (outputLocation \u003d\u003d null) {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n         else {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOutputStream \u003d true;\n         }\n \n         // setup a listener\n-        AuditListener listener;\n+        final AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOutputStream, out, false);\n \n         }\n         else {\n             if (closeOutputStream) {\n                 CommonUtils.close(out);\n             }\n             throw new IllegalStateException(String.format(\n                     \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n                     format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "70a6e2e6d34fa5a404e88e45cd62a20a06e19556": {
      "type": "Ybodychange",
      "commitMessage": "Issue #2666: Print name of the Check after printing violation message\n",
      "commitDate": 1451074818000,
      "commitName": "70a6e2e6d34fa5a404e88e45cd62a20a06e19556",
      "commitAuthor": "Andrei Selkin",
      "commitDateOld": 1449184604000,
      "commitNameOld": "f65b17cbc30795247fef3077cce16a8bb53e9ffc",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 21.88,
      "commitsBetweenForRepo": 114,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,37 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out;\n         boolean closeOutputStream;\n         if (outputLocation \u003d\u003d null) {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n         else {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOutputStream \u003d true;\n         }\n \n         // setup a listener\n         AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n-            listener \u003d new DefaultLogger(out, closeOutputStream, out, false, true);\n+            listener \u003d new DefaultLogger(out, closeOutputStream, out, false);\n \n         }\n         else {\n             if (closeOutputStream) {\n                 CommonUtils.close(out);\n             }\n             throw new IllegalStateException(String.format(\n                     \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n                     format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "423ed9e469db620671459827b58c89025d8f6c66": {
      "type": "Ybodychange",
      "commitMessage": "Issue #974: PMD violation ConfusingTernary (partial fix)\n",
      "commitDate": 1444265756000,
      "commitName": "423ed9e469db620671459827b58c89025d8f6c66",
      "commitAuthor": "Roman Ivanov",
      "commitDateOld": 1444178762000,
      "commitNameOld": "30c3a362d45721e6925fe89ba71f0fe69d0fc471",
      "commitAuthorOld": "Roman Ivanov",
      "daysBetweenCommits": 1.01,
      "commitsBetweenForRepo": 10,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,37 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out;\n         boolean closeOutputStream;\n-        if (outputLocation !\u003d null) {\n-            out \u003d new FileOutputStream(outputLocation);\n-            closeOutputStream \u003d true;\n-        }\n-        else {\n+        if (outputLocation \u003d\u003d null) {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n+        else {\n+            out \u003d new FileOutputStream(outputLocation);\n+            closeOutputStream \u003d true;\n+        }\n \n         // setup a listener\n         AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOutputStream, out, false, true);\n \n         }\n         else {\n             if (closeOutputStream) {\n                 CommonUtils.close(out);\n             }\n             throw new IllegalStateException(String.format(\n                     \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n                     format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "b6d9344d1c152f225a22ce9ce09341b3cc9488af": {
      "type": "Yexceptionschange",
      "commitMessage": "Pull #2034: Use StandardCharsets and get rid of UnsupportedEncodingException\n",
      "commitDate": 1442527299000,
      "commitName": "b6d9344d1c152f225a22ce9ce09341b3cc9488af",
      "commitAuthor": "Michael Osipov",
      "commitDateOld": 1442014362000,
      "commitNameOld": "0fc8b62a35beddc89cb3412388c27e88cd8cab4a",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 5.94,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,37 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n-            throws UnsupportedEncodingException, FileNotFoundException {\n+            throws FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out;\n         boolean closeOutputStream;\n         if (outputLocation !\u003d null) {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOutputStream \u003d true;\n         }\n         else {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n \n         // setup a listener\n         AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOutputStream, out, false, true);\n \n         }\n         else {\n             if (closeOutputStream) {\n                 CommonUtils.close(out);\n             }\n             throw new IllegalStateException(String.format(\n                     \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n                     format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "a29f01a95b9dee1e64ec7ed91b4d0876eb82c0bf": {
      "type": "Ybodychange",
      "commitMessage": "Issue #67: Added support of logging severity for all audit events\n",
      "commitDate": 1441879074000,
      "commitName": "a29f01a95b9dee1e64ec7ed91b4d0876eb82c0bf",
      "commitAuthor": "Andrei Selkin",
      "commitDateOld": 1441541856000,
      "commitNameOld": "4d8d047f465f9eb101390da63ee62a735fbedba5",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 3.9,
      "commitsBetweenForRepo": 24,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,37 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws UnsupportedEncodingException, FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out;\n         boolean closeOutputStream;\n         if (outputLocation !\u003d null) {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOutputStream \u003d true;\n         }\n         else {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n \n         // setup a listener\n         AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n-            listener \u003d new DefaultLogger(out, closeOutputStream);\n+            listener \u003d new DefaultLogger(out, closeOutputStream, out, false, true);\n \n         }\n         else {\n             if (closeOutputStream) {\n                 CommonUtils.close(out);\n             }\n             throw new IllegalStateException(String.format(\n                     \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n                     format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "cdf3e56bacd3895262af8a1df9ca5c81f4071970": {
      "type": "Ybodychange",
      "commitMessage": "Utils class has been splitted to CommonUtils and TokenUtils. Issue #1898\n",
      "commitDate": 1440677821000,
      "commitName": "cdf3e56bacd3895262af8a1df9ca5c81f4071970",
      "commitAuthor": "Ilja Dubinin",
      "commitDateOld": 1440677821000,
      "commitNameOld": "ed595de84fba2db507adaf01d04cb089a5e0bac5",
      "commitAuthorOld": "Ilja Dubinin",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,37 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws UnsupportedEncodingException, FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out;\n         boolean closeOutputStream;\n         if (outputLocation !\u003d null) {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOutputStream \u003d true;\n         }\n         else {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n \n         // setup a listener\n         AuditListener listener;\n         if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (PLAIN_FORMAT_NAME.equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOutputStream);\n \n         }\n         else {\n             if (closeOutputStream) {\n-                Utils.close(out);\n+                CommonUtils.close(out);\n             }\n             throw new IllegalStateException(String.format(\n                     \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n                     format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "8c3e4a50749044ae3177fc4c84db9c4fd93abca2": {
      "type": "Ybodychange",
      "commitMessage": "Issue #1566: MultipleStringLiterals violations partial fix\n",
      "commitDate": 1440504773000,
      "commitName": "8c3e4a50749044ae3177fc4c84db9c4fd93abca2",
      "commitAuthor": "Ruslan Diachenko",
      "commitDateOld": 1440042157000,
      "commitNameOld": "da6a8d083cb82a94707146de559911578f39affe",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 5.35,
      "commitsBetweenForRepo": 91,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,36 +1,37 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws UnsupportedEncodingException, FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out;\n         boolean closeOutputStream;\n         if (outputLocation !\u003d null) {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOutputStream \u003d true;\n         }\n         else {\n             out \u003d System.out;\n             closeOutputStream \u003d false;\n         }\n \n         // setup a listener\n         AuditListener listener;\n-        if (\"xml\".equals(format)) {\n+        if (XML_FORMAT_NAME.equals(format)) {\n             listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n-        else if (\"plain\".equals(format)) {\n+        else if (PLAIN_FORMAT_NAME.equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOutputStream);\n \n         }\n         else {\n             if (closeOutputStream) {\n                 Utils.close(out);\n             }\n-            throw new IllegalStateException(\"Invalid output format. Found \u0027\" + format\n-                    + \"\u0027 but expected \u0027plain\u0027 or \u0027xml\u0027.\");\n+            throw new IllegalStateException(String.format(\n+                    \"Invalid output format. Found \u0027%s\u0027 but expected \u0027%s\u0027 or \u0027%s\u0027.\",\n+                    format, PLAIN_FORMAT_NAME, XML_FORMAT_NAME));\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "259cc41625b88390ce26737a819aa446cfc72541": {
      "type": "Ybodychange",
      "commitMessage": "Issue #1243: Output stream has to be closed\n",
      "commitDate": 1439695399000,
      "commitName": "259cc41625b88390ce26737a819aa446cfc72541",
      "commitAuthor": "Baratali Izmailov",
      "commitDateOld": 1439295539000,
      "commitNameOld": "1935bed5772c0a939b9168b81acd2ab5aa800538",
      "commitAuthorOld": "Baratali Izmailov",
      "daysBetweenCommits": 4.63,
      "commitsBetweenForRepo": 53,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,33 +1,36 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws UnsupportedEncodingException, FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out;\n-        boolean closeOut;\n+        boolean closeOutputStream;\n         if (outputLocation !\u003d null) {\n             out \u003d new FileOutputStream(outputLocation);\n-            closeOut \u003d true;\n+            closeOutputStream \u003d true;\n         }\n         else {\n             out \u003d System.out;\n-            closeOut \u003d false;\n+            closeOutputStream \u003d false;\n         }\n \n         // setup a listener\n         AuditListener listener;\n         if (\"xml\".equals(format)) {\n-            listener \u003d new XMLLogger(out, closeOut);\n+            listener \u003d new XMLLogger(out, closeOutputStream);\n \n         }\n         else if (\"plain\".equals(format)) {\n-            listener \u003d new DefaultLogger(out, closeOut);\n+            listener \u003d new DefaultLogger(out, closeOutputStream);\n \n         }\n         else {\n+            if (closeOutputStream) {\n+                Utils.close(out);\n+            }\n             throw new IllegalStateException(\"Invalid output format. Found \u0027\" + format\n                     + \"\u0027 but expected \u0027plain\u0027 or \u0027xml\u0027.\");\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "8a3f5bf6d5389b9e175c9c769992faece6d76ada": {
      "type": "Ybodychange",
      "commitMessage": "Remove unused assignments. #1555\n\nFixes UnusedAssignment inspection violations.\n\nDescription:\n\u003eThis inspection points out the cases where a variable value is never used after its assignment, i.e.:\n- the variable never gets read after assignment OR\n- the value is always overwritten with another assignment before the next variable read OR\n - the variable initializer is redundant (for one of the above two reasons) OR\n - the variable is never used.\n",
      "commitDate": 1439007161000,
      "commitName": "8a3f5bf6d5389b9e175c9c769992faece6d76ada",
      "commitAuthor": "Michal Kordas",
      "commitDateOld": 1438566538000,
      "commitNameOld": "2880edd6554400955fb950bf8127311c436d2a7a",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 5.1,
      "commitsBetweenForRepo": 27,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,33 +1,33 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws UnsupportedEncodingException, FileNotFoundException {\n \n         // setup the output stream\n-        OutputStream out \u003d null;\n-        boolean closeOut \u003d false;\n+        OutputStream out;\n+        boolean closeOut;\n         if (outputLocation !\u003d null) {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOut \u003d true;\n         }\n         else {\n             out \u003d System.out;\n             closeOut \u003d false;\n         }\n \n         // setup a listener\n-        AuditListener listener \u003d null;\n+        AuditListener listener;\n         if (\"xml\".equals(format)) {\n             listener \u003d new XMLLogger(out, closeOut);\n \n         }\n         else if (\"plain\".equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOut);\n \n         }\n         else {\n             throw new IllegalStateException(\"Invalid output format. Found \u0027\" + format\n                     + \"\u0027 but expected \u0027plain\u0027 or \u0027xml\u0027.\");\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "aaf39002ac7fa00b95f4719beca058f6f7445574": {
      "type": "Ybodychange",
      "commitMessage": "100% coverage for Main.java . #1294\n",
      "commitDate": 1438154965000,
      "commitName": "aaf39002ac7fa00b95f4719beca058f6f7445574",
      "commitAuthor": "Roman Ivanov",
      "commitDateOld": 1437631122000,
      "commitNameOld": "acbd47a66b01acc392a7bd37ad3a2e65eecd308a",
      "commitAuthorOld": "Aleksandr Ivanov",
      "daysBetweenCommits": 6.06,
      "commitsBetweenForRepo": 73,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,34 +1,33 @@\n     private static AuditListener createListener(String format,\n                                                 String outputLocation)\n             throws UnsupportedEncodingException, FileNotFoundException {\n \n         // setup the output stream\n         OutputStream out \u003d null;\n         boolean closeOut \u003d false;\n         if (outputLocation !\u003d null) {\n             out \u003d new FileOutputStream(outputLocation);\n             closeOut \u003d true;\n         }\n         else {\n             out \u003d System.out;\n             closeOut \u003d false;\n         }\n \n         // setup a listener\n         AuditListener listener \u003d null;\n-        switch (format) {\n-            case \"xml\":\n-                listener \u003d new XMLLogger(out, closeOut);\n-                break;\n+        if (\"xml\".equals(format)) {\n+            listener \u003d new XMLLogger(out, closeOut);\n \n-            case \"plain\":\n-                listener \u003d new DefaultLogger(out, closeOut);\n-                break;\n+        }\n+        else if (\"plain\".equals(format)) {\n+            listener \u003d new DefaultLogger(out, closeOut);\n \n-            default:\n-                throw new IllegalStateException(\"Invalid output format. Found \u0027\" + format\n-                        + \"\u0027 but expected \u0027plain\u0027 or \u0027xml\u0027.\");\n+        }\n+        else {\n+            throw new IllegalStateException(\"Invalid output format. Found \u0027\" + format\n+                    + \"\u0027 but expected \u0027plain\u0027 or \u0027xml\u0027.\");\n         }\n \n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "1a2c318e22a0b2b22ccc76019217c0892fe2d59b": {
      "type": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
      "commitMessage": "huge refactoring for CLI Main class. Issue #596\n",
      "commitDate": 1430849532000,
      "commitName": "1a2c318e22a0b2b22ccc76019217c0892fe2d59b",
      "commitAuthor": "Roman Ivanov",
      "subchanges": [
        "Yparameterchange",
        "Yexceptionschange",
        "Ybodychange"
      ]
    },
    "ab2f93f9bf61816d84154e636d32c81c05854e24": {
      "type": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
      "commitMessage": "Delete System.exit() and delegate exit control into separate method.\n\nIssue #596\n",
      "commitDate": 1429852725000,
      "commitName": "ab2f93f9bf61816d84154e636d32c81c05854e24",
      "commitAuthor": "Damian Szczepanik",
      "subchanges": [
        "Yparameterchange",
        "Yexceptionschange",
        "Ybodychange"
      ]
    },
    "702a1a957607881e72bb94b3104c2603ef10891f": {
      "type": "Yexceptionschange",
      "commitMessage": "fix for Findbugs violation DM_DEFAULT_ENCODING. Issue #778\n",
      "commitDate": 1428557866000,
      "commitName": "702a1a957607881e72bb94b3104c2603ef10891f",
      "commitAuthor": "Roman Ivanov",
      "commitDateOld": 1426951045000,
      "commitNameOld": "48eee721d989ee5933fe6849a2f693c28a9385c3",
      "commitAuthorOld": "Michal Kordas",
      "daysBetweenCommits": 18.6,
      "commitsBetweenForRepo": 65,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,22 @@\n     private static AuditListener createListener(CommandLine line,\n                                                 OutputStream out,\n                                                 boolean closeOut)\n+            throws UnsupportedEncodingException\n     {\n         final String format \u003d\n             line.hasOption(\"f\") ? line.getOptionValue(\"f\") : \"plain\";\n \n         AuditListener listener \u003d null;\n         if (\"xml\".equals(format)) {\n             listener \u003d new XMLLogger(out, closeOut);\n         }\n         else if (\"plain\".equals(format)) {\n             listener \u003d new DefaultLogger(out, closeOut);\n         }\n         else {\n             System.out.println(\"Invalid format: (\" + format\n                                + \"). Must be \u0027plain\u0027 or \u0027xml\u0027.\");\n             usage();\n         }\n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "e36ae750f6378b9a3cd8e5171c6e6b710bf10959": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"Added support of logging severity for all audit events, issue #67\"\n\nThis reverts commit ca3ffb73abc810385a4ce8fe685ad31c9d172bff.\n",
      "commitDate": 1426655757000,
      "commitName": "e36ae750f6378b9a3cd8e5171c6e6b710bf10959",
      "commitAuthor": "Roman Ivanov",
      "commitDateOld": 1426571164000,
      "commitNameOld": "b9a1bec65f9eec7b96add7336dfcca4bf284e479",
      "commitAuthorOld": "alexkravin",
      "daysBetweenCommits": 0.98,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,21 @@\n     private static AuditListener createListener(CommandLine line,\n                                                 OutputStream out,\n                                                 boolean closeOut)\n     {\n         final String format \u003d\n             line.hasOption(\"f\") ? line.getOptionValue(\"f\") : \"plain\";\n \n         AuditListener listener \u003d null;\n         if (\"xml\".equals(format)) {\n             listener \u003d new XMLLogger(out, closeOut);\n         }\n         else if (\"plain\".equals(format)) {\n-            listener \u003d new DefaultLogger(out, closeOut, true);\n+            listener \u003d new DefaultLogger(out, closeOut);\n         }\n         else {\n             System.out.println(\"Invalid format: (\" + format\n                                + \"). Must be \u0027plain\u0027 or \u0027xml\u0027.\");\n             usage();\n         }\n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "ca3ffb73abc810385a4ce8fe685ad31c9d172bff": {
      "type": "Ybodychange",
      "commitMessage": "Added support of logging severity for all audit events, issue #67\n",
      "commitDate": 1426401131000,
      "commitName": "ca3ffb73abc810385a4ce8fe685ad31c9d172bff",
      "commitAuthor": "alexkravin",
      "commitDateOld": 1424294072000,
      "commitNameOld": "c9a9e6508c15e00cf6820b213d79d5ebf41c6343",
      "commitAuthorOld": "Roman Ivanov",
      "daysBetweenCommits": 24.39,
      "commitsBetweenForRepo": 136,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,21 @@\n     private static AuditListener createListener(CommandLine line,\n                                                 OutputStream out,\n                                                 boolean closeOut)\n     {\n         final String format \u003d\n             line.hasOption(\"f\") ? line.getOptionValue(\"f\") : \"plain\";\n \n         AuditListener listener \u003d null;\n         if (\"xml\".equals(format)) {\n             listener \u003d new XMLLogger(out, closeOut);\n         }\n         else if (\"plain\".equals(format)) {\n-            listener \u003d new DefaultLogger(out, closeOut);\n+            listener \u003d new DefaultLogger(out, closeOut, true);\n         }\n         else {\n             System.out.println(\"Invalid format: (\" + format\n                                + \"). Must be \u0027plain\u0027 or \u0027xml\u0027.\");\n             usage();\n         }\n         return listener;\n     }\n\\ No newline at end of file\n"
    },
    "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "Prefixes, checkstyle, #512\n\nConflicts:\n\tsrc/main/java/com/puppycrawl/tools/checkstyle/TreeWalker.java\n",
      "commitDate": 1421678312000,
      "commitName": "b8ca6a585b824e91b3b8c72dd5cc53c0eb0ab0f1",
      "commitAuthor": "alexkravin",
      "subchanges": [
        "Yparameterchange",
        "Ybodychange"
      ]
    },
    "f1efb27670a93690577f1bae17fc9dcbd88a795d": {
      "type": "Yfilerename",
      "commitMessage": "moving to standard directory layout\n",
      "commitDate": 1393953491000,
      "commitName": "f1efb27670a93690577f1bae17fc9dcbd88a795d",
      "commitAuthor": "Ivan Sopov",
      "commitDateOld": 1393482905000,
      "commitNameOld": "1cdaeaaa4fbf02a7388f1fcbea1c86ef0ea32fed",
      "commitAuthorOld": "Andrew Gaul",
      "daysBetweenCommits": 5.45,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": ""
    },
    "784842200f5307597d721ba0190c912cfab1b77f": {
      "type": "Yintroduced",
      "commitMessage": "Refactored, that was really ugly code I had written.\n",
      "commitDate": 1056715858000,
      "commitName": "784842200f5307597d721ba0190c912cfab1b77f",
      "commitAuthor": "Oliver Burn"
    }
  }
}