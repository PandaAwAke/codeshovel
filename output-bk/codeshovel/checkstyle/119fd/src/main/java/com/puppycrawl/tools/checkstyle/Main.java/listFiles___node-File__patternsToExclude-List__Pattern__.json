{
  "origin": "codeshovel",
  "repositoryName": "checkstyle",
  "repositoryPath": "/home/ncbradley/codeshovel-repos/checkstyle/.git",
  "startCommitName": "119fd4fb33bef9f5c66fc950396669af842c21a3",
  "sourceFileName": "Main.java",
  "functionName": "listFiles",
  "functionId": "listFiles___node-File__patternsToExclude-List__Pattern__",
  "sourceFilePath": "src/main/java/com/puppycrawl/tools/checkstyle/Main.java",
  "functionStartLine": 651,
  "functionEndLine": 673,
  "changeHistory": [
    "fbf3f95c2273be23b966cba6e6ef89390a6fb020",
    "6ee753af51a58c1c6ecc5e6d5946a32ee937eaa6",
    "93e0187129d7ac919a2a366ad75f5f9f7ed4f553",
    "ab2f93f9bf61816d84154e636d32c81c05854e24"
  ],
  "changeHistoryShort": {
    "fbf3f95c2273be23b966cba6e6ef89390a6fb020": "Ybodychange",
    "6ee753af51a58c1c6ecc5e6d5946a32ee937eaa6": "Ymultichange(Yparameterchange,Ybodychange)",
    "93e0187129d7ac919a2a366ad75f5f9f7ed4f553": "Ybodychange",
    "ab2f93f9bf61816d84154e636d32c81c05854e24": "Yintroduced"
  },
  "changeHistoryDetails": {
    "fbf3f95c2273be23b966cba6e6ef89390a6fb020": {
      "type": "Ybodychange",
      "commitMessage": "Issue #3433: Cut down on Checkstyle\u0027s dependencies on Guava (part 2) (#3454)\n\n",
      "commitDate": 1474426326000,
      "commitName": "fbf3f95c2273be23b966cba6e6ef89390a6fb020",
      "commitAuthor": "Andrei Selkin",
      "commitDateOld": 1473886714000,
      "commitNameOld": "25a37e5049b7816b34c552899841a978efc37a63",
      "commitAuthorOld": "Andrei Selkin",
      "daysBetweenCommits": 6.25,
      "commitsBetweenForRepo": 9,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,23 @@\n     private static List\u003cFile\u003e listFiles(File node, List\u003cPattern\u003e patternsToExclude) {\n         // could be replaced with org.apache.commons.io.FileUtils.list() method\n         // if only we add commons-io library\n-        final List\u003cFile\u003e result \u003d Lists.newLinkedList();\n+        final List\u003cFile\u003e result \u003d new LinkedList\u003c\u003e();\n \n         if (node.canRead()) {\n             if (node.isDirectory()) {\n                 if (!isDirectoryExcluded(node.getAbsolutePath(), patternsToExclude)) {\n                     final File[] files \u003d node.listFiles();\n                     // listFiles() can return null, so we need to check it\n                     if (files !\u003d null) {\n                         for (File element : files) {\n                             result.addAll(listFiles(element, patternsToExclude));\n                         }\n                     }\n                 }\n             }\n             else if (node.isFile()) {\n                 result.add(node);\n             }\n         }\n         return result;\n     }\n\\ No newline at end of file\n"
    },
    "6ee753af51a58c1c6ecc5e6d5946a32ee937eaa6": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "Issue #3287: added exclude directory option (#3288)\n\n",
      "commitDate": 1469588124000,
      "commitName": "6ee753af51a58c1c6ecc5e6d5946a32ee937eaa6",
      "commitAuthor": "rnveach",
      "subchanges": [
        "Yparameterchange",
        "Ybodychange"
      ]
    },
    "93e0187129d7ac919a2a366ad75f5f9f7ed4f553": {
      "type": "Ybodychange",
      "commitMessage": "removal of validation suppressions, and resoling of them. Issue #596\n",
      "commitDate": 1430862026000,
      "commitName": "93e0187129d7ac919a2a366ad75f5f9f7ed4f553",
      "commitAuthor": "Roman Ivanov",
      "commitDateOld": 1430849532000,
      "commitNameOld": "1a2c318e22a0b2b22ccc76019217c0892fe2d59b",
      "commitAuthorOld": "Roman Ivanov",
      "daysBetweenCommits": 0.14,
      "commitsBetweenForRepo": 2,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,22 @@\n     private static List\u003cFile\u003e listFiles(File node)\n     {\n         // could be replaced with org.apache.commons.io.FileUtils.list() method\n         // if only we add commons-io library\n-        final List\u003cFile\u003e files \u003d Lists.newLinkedList();\n+        final List\u003cFile\u003e result \u003d Lists.newLinkedList();\n \n         if (node.canRead()) {\n             if (node.isDirectory()) {\n-                for (File element : node.listFiles()) {\n-                    files.addAll(listFiles(element));\n+                final File[] files \u003d node.listFiles();\n+                // listFiles() can return null, so we need to check it\n+                if (files !\u003d null) {\n+                    for (File element : files) {\n+                        result.addAll(listFiles(element));\n+                    }\n                 }\n             }\n             else if (node.isFile()) {\n-                files.add(node);\n+                result.add(node);\n             }\n         }\n-        return files;\n+        return result;\n     }\n\\ No newline at end of file\n"
    },
    "ab2f93f9bf61816d84154e636d32c81c05854e24": {
      "type": "Yintroduced",
      "commitMessage": "Delete System.exit() and delegate exit control into separate method.\n\nIssue #596\n",
      "commitDate": 1429852725000,
      "commitName": "ab2f93f9bf61816d84154e636d32c81c05854e24",
      "commitAuthor": "Damian Szczepanik"
    }
  }
}