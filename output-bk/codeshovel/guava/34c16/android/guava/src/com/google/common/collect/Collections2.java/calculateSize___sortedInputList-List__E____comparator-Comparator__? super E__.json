{
  "origin": "codeshovel",
  "repositoryName": "guava",
  "repositoryPath": "/home/ncbradley/codeshovel-repos/guava/.git",
  "startCommitName": "34c1616279efe08089960aafd3df486cf8a04820",
  "sourceFileName": "Collections2.java",
  "functionName": "calculateSize",
  "functionId": "calculateSize___sortedInputList-List__E____comparator-Comparator__? super E__",
  "sourceFilePath": "android/guava/src/com/google/common/collect/Collections2.java",
  "functionStartLine": 437,
  "functionEndLine": 456,
  "changeHistory": [
    "78dab8037a51b63e0e0a92ac0c4a427591d97219",
    "9b94fb3965c6869b0ac47420958a4bbae0b2d54c"
  ],
  "changeHistoryShort": {
    "78dab8037a51b63e0e0a92ac0c4a427591d97219": "Ybodychange",
    "9b94fb3965c6869b0ac47420958a4bbae0b2d54c": "Yintroduced"
  },
  "changeHistoryDetails": {
    "78dab8037a51b63e0e0a92ac0c4a427591d97219": {
      "type": "Ybodychange",
      "commitMessage": "Stick to IntMath in Collections2.orderedPermutations.size.\n\nEffects on Collections2ProGuard:\n89279 bytes \u003d\u003e 85910 bytes\n38 classes \u003d\u003e 36 classes\n202 methods \u003d\u003e 199 methods\n\n-------------\nCreated by MOE: https://github.com/google/moe\nMOE_MIGRATED_REVID\u003d156321417\n",
      "commitDate": 1495043620000,
      "commitName": "78dab8037a51b63e0e0a92ac0c4a427591d97219",
      "commitAuthor": "lowasser",
      "commitDateOld": 1495035529000,
      "commitNameOld": "e94dd5ae1fc35480ebd99af201d2d46a671a8e4e",
      "commitAuthorOld": "lowasser",
      "daysBetweenCommits": 0.09,
      "commitsBetweenForRepo": 2,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,24 +1,20 @@\n     private static \u003cE\u003e int calculateSize(\n         List\u003cE\u003e sortedInputList, Comparator\u003c? super E\u003e comparator) {\n-      long permutations \u003d 1;\n+      int permutations \u003d 1;\n       int n \u003d 1;\n       int r \u003d 1;\n       while (n \u003c sortedInputList.size()) {\n         int comparison \u003d comparator.compare(sortedInputList.get(n - 1), sortedInputList.get(n));\n         if (comparison \u003c 0) {\n           // We move to the next non-repeated element.\n-          permutations *\u003d binomial(n, r);\n+          permutations \u003d IntMath.saturatedMultiply(permutations, IntMath.binomial(n, r));\n           r \u003d 0;\n-          if (!isPositiveInt(permutations)) {\n+          if (permutations \u003d\u003d Integer.MAX_VALUE) {\n             return Integer.MAX_VALUE;\n           }\n         }\n         n++;\n         r++;\n       }\n-      permutations *\u003d binomial(n, r);\n-      if (!isPositiveInt(permutations)) {\n-        return Integer.MAX_VALUE;\n-      }\n-      return (int) permutations;\n+      return IntMath.saturatedMultiply(permutations, IntMath.binomial(n, r));\n     }\n\\ No newline at end of file\n"
    },
    "9b94fb3965c6869b0ac47420958a4bbae0b2d54c": {
      "type": "Yintroduced",
      "commitMessage": "Begin exporting sources of Guava for Android.\n\npom.xml files to come.\n\n-------------\nCreated by MOE: https://github.com/google/moe\nMOE_MIGRATED_REVID\u003d153757913\n",
      "commitDate": 1492741671000,
      "commitName": "9b94fb3965c6869b0ac47420958a4bbae0b2d54c",
      "commitAuthor": "zhenghua"
    }
  }
}