{
  "origin": "codeshovel",
  "repositoryName": "guava",
  "repositoryPath": "/home/ncbradley/codeshovel-repos/guava/.git",
  "startCommitName": "34c1616279efe08089960aafd3df486cf8a04820",
  "sourceFileName": "EnumMultiset.java",
  "functionName": "remove",
  "functionId": "remove___element-Object__occurrences-int",
  "sourceFilePath": "android/guava/src/com/google/common/collect/EnumMultiset.java",
  "functionStartLine": 160,
  "functionEndLine": 182,
  "changeHistory": [
    "68db9c6ac5c87c39846f4c690f662e52946b93d7",
    "b89a6586f5da3a943e4b412bd61cc6bc199f451f"
  ],
  "changeHistoryShort": {
    "68db9c6ac5c87c39846f4c690f662e52946b93d7": "Ybodychange",
    "b89a6586f5da3a943e4b412bd61cc6bc199f451f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "68db9c6ac5c87c39846f4c690f662e52946b93d7": {
      "type": "Ybodychange",
      "commitMessage": "Fix edge case in EnumMultiset.remove\n\n-------------\nCreated by MOE: https://github.com/google/moe\nMOE_MIGRATED_REVID\u003d168298209\n",
      "commitDate": 1505176211000,
      "commitName": "68db9c6ac5c87c39846f4c690f662e52946b93d7",
      "commitAuthor": "lowasser",
      "commitDateOld": 1505176031000,
      "commitNameOld": "6f630e9bd3b386720c5971812f23f5c3535841b4",
      "commitAuthorOld": "cushon",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,23 @@\n   public int remove(@Nullable Object element, int occurrences) {\n     if (element \u003d\u003d null || !isActuallyE(element)) {\n       return 0;\n     }\n     Enum\u003c?\u003e e \u003d (Enum\u003c?\u003e) element;\n     checkNonnegative(occurrences, \"occurrences\");\n     if (occurrences \u003d\u003d 0) {\n       return count(element);\n     }\n     int index \u003d e.ordinal();\n     int oldCount \u003d counts[index];\n-    if (oldCount \u003c\u003d occurrences) {\n+    if (oldCount \u003d\u003d 0) {\n+      return 0;\n+    } else if (oldCount \u003c\u003d occurrences) {\n       counts[index] \u003d 0;\n       distinctElements--;\n       size -\u003d oldCount;\n     } else {\n       counts[index] \u003d oldCount - occurrences;\n       size -\u003d occurrences;\n     }\n     return oldCount;\n   }\n\\ No newline at end of file\n"
    },
    "b89a6586f5da3a943e4b412bd61cc6bc199f451f": {
      "type": "Yintroduced",
      "commitMessage": "Rewrite EnumMultiset to be directly backed by an E[] and an int[], avoiding allocation of boxing objects.\n\nIt turns out that copying the enum constants array allocates less, requires less code, and avoids boxing overhead.\n\n-------------\nCreated by MOE: https://github.com/google/moe\nMOE_MIGRATED_REVID\u003d168250122\n",
      "commitDate": 1505152302000,
      "commitName": "b89a6586f5da3a943e4b412bd61cc6bc199f451f",
      "commitAuthor": "lowasser"
    }
  }
}