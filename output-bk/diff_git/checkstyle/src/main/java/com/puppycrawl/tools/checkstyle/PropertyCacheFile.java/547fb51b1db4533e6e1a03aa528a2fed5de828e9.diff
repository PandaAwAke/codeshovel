diff --git a/src/main/java/com/puppycrawl/tools/checkstyle/PropertyCacheFile.java b/src/main/java/com/puppycrawl/tools/checkstyle/PropertyCacheFile.java
index 7abbea036..c1330db24 100644
--- a/src/main/java/com/puppycrawl/tools/checkstyle/PropertyCacheFile.java
+++ b/src/main/java/com/puppycrawl/tools/checkstyle/PropertyCacheFile.java
@@ -73,101 +73,103 @@ final class PropertyCacheFile
         if (fileName != null) {
             FileInputStream inStream = null;
             // get the current config so if the file isn't found
             // the first time the hash will be added to output file
             final String currentConfigHash = getConfigHashCode(currentConfig);
             try {
                 inStream = new FileInputStream(fileName);
                 details.load(inStream);
                 final String cachedConfigHash =
                     details.getProperty(CONFIG_HASH_KEY);
                 setInActive = false;
                 if (cachedConfigHash == null
                     || !cachedConfigHash.equals(currentConfigHash))
                 {
                     // Detected configuration change - clear cache
                     details.clear();
                     details.put(CONFIG_HASH_KEY, currentConfigHash);
                 }
             }
             catch (final FileNotFoundException e) {
                 // Ignore, the cache does not exist
                 setInActive = false;
                 // put the hash in the file if the file is going to be created
                 details.put(CONFIG_HASH_KEY, currentConfigHash);
             }
             catch (final IOException e) {
                 Utils.getExceptionLogger()
                     .debug("Unable to open cache file, ignoring.", e);
             }
             finally {
                 Closeables.closeQuietly(inStream);
             }
         }
         detailsFile = setInActive ? null : fileName;
     }
 
     /** Cleans up the object and updates the cache file. **/
     void destroy()
     {
         if (detailsFile != null) {
             FileOutputStream out = null;
             try {
                 out = new FileOutputStream(detailsFile);
                 details.store(out, null);
             }
             catch (final IOException e) {
                 Utils.getExceptionLogger()
                     .debug("Unable to save cache file.", e);
             }
             finally {
-                this.flushAndCloseOutStream(out);
+                if (out != null) {
+                    this.flushAndCloseOutStream(out);
+                }
             }
         }
     }
 
     /**
      * Flushes and closes output stream.
      * @param stream the output stream
      */
     private void flushAndCloseOutStream(OutputStream stream)
     {
         try {
             Flushables.flush(stream, false);
             Closeables.close(stream, false);
         }
         catch (final IOException ex) {
             Utils.getExceptionLogger()
                     .debug("Unable to flush and close output stream.", ex);
         }
     }
 
     /**
      * @return whether the specified file has already been checked ok
      * @param fileName the file to check
      * @param timestamp the timestamp of the file to check
      */
     boolean alreadyChecked(String fileName, long timestamp)
     {
         final String lastChecked = details.getProperty(fileName);
         return lastChecked != null
             && lastChecked.equals(Long.toString(timestamp));
     }
 
     /**
      * Records that a file checked ok.
      * @param fileName name of the file that checked ok
      * @param timestamp the timestamp of the file
      */
     void checkedOk(String fileName, long timestamp)
     {
         details.put(fileName, Long.toString(timestamp));
     }
 
     /**
      * Calculates the hashcode for a GlobalProperties.
      *
      * @param configuration the GlobalProperties
      * @return the hashcode for <code>configuration</code>
      */
     private String getConfigHashCode(Serializable configuration)
     {
